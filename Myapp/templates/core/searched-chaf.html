
{% load static %}
<!DOCTYPE html>
<html lang="zxx">


<head>


    {% csrf_token %}
    <meta name="csrf-token" content="{{ csrf_token }}">
    
    
    <style>
            .center-screen {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
                }

        :root {
          --bg-light: #fff;
          --bg-dark: #1e1e1e;
          --text-light: #333;
          --text-dark: #eee;
          --input-bg-light: #f9f9f9;
          --input-bg-dark: #2b2b2b;
          --border-color: #ccc;
          --green: #4CAF50;
        }
      
        @media (prefers-color-scheme: dark) {
          :root {
            --bg-light: var(--bg-dark);
            --text-light: var(--text-dark);
            --input-bg-light: var(--input-bg-dark);
            --border-color: #444;
          }
        }
      
        #feedback-modal {
          display: none;
          position: fixed;
          top: 0; left: 0;
          width: 100%; height: 100%;
          background: rgba(0, 0, 0, 0.6);
          z-index: 1000;
          justify-content: center;
          align-items: center;
          font-family: 'Segoe UI', sans-serif;
          padding: 20px;
        }
      
        .modal-content {
          background: var(--bg-light);
          padding: 25px;
          border-radius: 20px;
          width: 100%;
          max-width: 450px;
          box-shadow: 0 10px 30px rgba(0,0,0,0.2);
          position: relative;
          animation: fadeIn 0.3s ease-in-out;
          color: var(--text-light);
        }
      
        .modal-content h3 {
          margin-top: 0;
          font-size: 22px;
        }
      
        .modal-content input,
        .modal-content textarea,
        .modal-content select {
          width: 100%;
          padding: 12px 14px;
          margin-bottom: 15px;
          border: 1px solid var(--border-color);
          border-radius: 10px;
          font-size: 15px;
          background-color: var(--input-bg-light);
          color: var(--text-light);
        }
      
        .modal-content button[type="submit"] {
          background-color: var(--green);
          color: white;
          padding: 12px;
          border: none;
          border-radius: 10px;
          cursor: pointer;
          font-size: 16px;
          width: 100%;
        }
      
        #feedback-message {
          color: limegreen;
          margin-top: 10px;
          display: none;
        }
      
        .close-btn {
          position: absolute;
          top: 12px;
          right: 16px;
          font-size: 22px;
          background: none;
          border: none;
          cursor: pointer;
          color: #999;
        }
      
        .close-btn:hover {
          color: #333;
        }
      
        @keyframes fadeIn {
          from { transform: scale(0.95); opacity: 0; }
          to { transform: scale(1); opacity: 1; }
        }
      
        /* Floating button */
 .floating-btn {
  position: fixed;
  bottom: 20px;
  left: 20px; /* Badiliko hapa */
  background-color: var(--green);
  color: white;
  border: none;
  border-radius: 50%;
  width: 55px;
  height: 55px;
  font-size: 26px;
  cursor: pointer;
  z-index: 1001;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

.floating-btn:hover {
  transform: scale(1.1);
}

        @media (max-width: 480px) {
          .modal-content {
            padding: 20px;
            border-radius: 15px;
          }
      
          .floating-btn {
            width: 45px;
            height: 45px;
            font-size: 22px;
          }
        }
      </style>
    
    <script>
        if (!navigator.userAgent.includes("Mozilla")) {
            document.body.innerHTML = "Bots not allowed!";
        }
    </script>
    

    <script>
        var a=10,b=20;console.log(a+b);
    </script>
    
    
    <script>
        // Kuzuia Right Click
        document.addEventListener("contextmenu", function(event) {
            event.preventDefault();
            alert("🚫 Sorry, Right Click is Disabled! for more info call 0629712678");
        });
    
        // Kuzuia DevTools (F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U)
        document.addEventListener("keydown", function(event) {
            if (event.keyCode == 123) {  // F12
                event.preventDefault();
                alert("🚫 Sorry, Inspect Element is Disabled! for more info call 0629712678");
            }
            if (event.ctrlKey && event.shiftKey && (event.keyCode == 73 || event.keyCode == 74)) {  // Ctrl+Shift+I or Ctrl+Shift+J
                event.preventDefault();
                alert("🚫 Sorry, Developer Tools is Disabled! for more info call 0629712678");
            }
            if (event.ctrlKey && event.keyCode == 85) {  // Ctrl+U
                event.preventDefault();
                alert("🚫 Sorry, View Source is Disabled! for more info call 0629712678");
            }
        });
    </script>
    

    
<script>
    document.addEventListener("copy", function(event) {
        event.preventDefault();
        alert("🚫 Sorry, Copying Content is Disabled! for more info call 0629712678");
    });
</script>



<meta name="monetag" content="d73f0efb5d369d24830f6c46b1316c00">
    
    
    <style>
        .marquee-container {
    width: 100%;
    overflow: hidden;
    background-color: #f54141; /* Rangi ya nyuma (njano) */
    color: rgb(255, 255, 255); /* Rangi ya maandishi */
    padding: 5px 0;
    font-weight: bold;
    text-align: center;
    position: relative;
    white-space: nowrap;
}

.marquee-text {
    display: inline-block;
    position: relative;
    animation: marquee 14s linear infinite;
    font-size: 20px;
}

@keyframes marquee {
    from {
        transform: translateX(100%);
    }
    to {
        transform: translateX(-100%);
    }
}

/* Styling for the button */
.btn-unique {
    background: linear-gradient(45deg, #ff9a8b, #fad0c4); /* Gradient background for a unique look */
    color: white; /* White text color */
    border: none;
    padding: 15px 30px;
    font-size: 18px;
    font-family: 'Arial', sans-serif;
    border-radius: 25px; /* Rounded corners for a smooth look */
    cursor: pointer;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1); /* Soft shadow with slight blur */
    animation: zoomInOut 2s infinite ease-in-out; /* Apply animation */
    transition: transform 0.3s ease-in-out; /* Smooth scaling transition */
}

/* Hover effect */
.btn-unique:hover {
    transform: scale(1.1); /* Slight zoom effect on hover */
}

/* Keyframes for continuous zoom-in and zoom-out */
@keyframes zoomInOut {
    0% {
        transform: scale(1); /* Initial size */
    }
    50% {
        transform: scale(1.2); /* Zoom in to 120% */
    }
    100% {
        transform: scale(1); /* Zoom back to original size */
    }
}

       </style>


	
    <meta name="monetag" content="d73f0efb5d369d24830f6c46b1316c00">

	
      <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-L8FYVV0MZV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-L8FYVV0MZV');
</script>


    {% for property in results %}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "RealEstateListing",
      "name": "{{ property.title }}",
      "description": "{{ property.status }}",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "{{ property.ward }}",
        "addressLocality": "{{ property.district }}",
        "addressRegion": "{{ property.region }}",
        "addressCountry": "TZ"
      },
      "offers": {
        "@type": "Offer",
        "priceCurrency": "TZS",
        "price": "{{ property.price }}",
        "availability": "InStock"
      },
      "image": "{{property.image.url}}"
    }
    </script>
    {% endfor %}

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="NyumbaChap ni Jukwaa bora Tanzania la kukusaidia kutafuta nyumba za kupangisha au kununua, pamoja na mawasiliano ya wamiliki.">
    <meta name="author" content="NyumbaChap Team">
    <meta name="keywords" content="Nyumba Tanzania, Vyumba vya Kupangisha, Nyumba za Kuuza, Hostel, Dar es Salaam, Arusha, Mbeya, Zanzibar, NyumbaChap, Mali isiyohamishika, nyumba mpya, nyumba nzuri, vyumba bei nafuu">

    <!-- ✅ Canonical link -->
    <link rel="canonical" href="https://nyumbachap.com/" />

    <!-- ✅ Open Graph meta tags (Facebook, WhatsApp, LinkedIn) -->
    <meta property="og:title" content="NyumbaChap - Tafuta nyumba kwa Urahisi Tanzania" />
    <meta property="og:description" content="Jukwaa bora Tanzania la kutafuta nyumba, vyumba na mawasiliano ya wamiliki kwa urahisi." />
    <meta property="og:image" content="https://nyumbachap.com/static/images/nyumbachap-og.jpg" />
    <meta property="og:image:alt" content="NyumbaChap - Real Estate Tanzania" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://nyumbachap.com/" />
    <meta property="fb:app_id" content="4155630028096866" /> <!-- optional -->

    <!-- ✅ Twitter Card meta tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="NyumbaChap - Tafuta nyumba kwa Urahisi Tanzania" />
    <meta name="twitter:description" content="Jukwaa bora Tanzania la kutafuta nyumba, vyumba na mawasiliano ya wamiliki kwa urahisi." />
    <meta name="twitter:image" content="https://nyumbachap.com/static/images/nyumbachap-og.jpg" />
    <meta name="twitter:site" content="@nyumbachap" /> <!-- optional --><title>nyumba ya kupanga</title>

        <!-- FAVICON -->
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'favicon.ico'%}">
    <link rel="stylesheet" href="{% static 'css/jquery-ui.css'%}">
    <!-- GOOGLE FONTS -->
    <link href="{% static 'https://fonts.googleapis.com/css?family=Lato:300,300i,400,400i%7CMontserrat:600,800' %}" rel="stylesheet">
    <!-- FONT AWESOME -->
    <link rel="stylesheet" href=" {% static 'font/flaticon.css' %}">
    <link rel="stylesheet" href=" {% static 'css/fontawesome-all.min.css' %}">
    <link rel="stylesheet" href=" {% static 'css/fontawesome-5-all.min.css'%}">
    <link rel="stylesheet" href=" {% static 'css/font-awesome.min.css' %}">
    <!-- ARCHIVES CSS -->
    <link rel="stylesheet" href="{% static 'css/search.css' %}">
    <link rel="stylesheet" href="{% static 'css/animate.css' %}">
    <link rel="stylesheet" href="{% static 'css/aos.css'%}">
    <link rel="stylesheet" href="{% static 'css/aos2.css'%}">
    <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">
    <link rel="stylesheet" href="{% static 'css/lightcase.css'%}">
    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css'%}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css'%}">
    <link rel="stylesheet" href="{% static 'css/menu.css'%}">
    <link rel="stylesheet" href="{% static 'css/slick.css'%}">
    <link rel="stylesheet" href="{% static 'css/styles.css'%}">
    <link rel="stylesheet" href="{% static 'css/maps.css'%}">
    <link rel="stylesheet" id="color" href="{% static 'css/colors/pink.css'%}">
   
</head>


<body class="inner-pages homepage-4 agents hp-6 full hd-white">

    <script defer src="https://static.getbutton.io/widget/bundle.js?id=UaD5Y"></script>

    <!-- Wrapper -->
    <div id="wrapper">
        <!-- START SECTION HEADINGS -->
        <!-- Header Container
        ================================================== -->
        <header id="header-container">
            <!-- Header -->
            <div id="header">
                <div class="container container-header">
                    <!-- Left Side Content -->
                    <div class="left-side">
                        <!-- Logo -->
                        <div id="logo">
                            <a href="{% url 'popular_featured' %}"><img src="{% static 'images/logo-red.svg' %}" alt=""></a>
                        </div>
                        <!-- Mobile Navigation -->
                        <div class="mmenu-trigger">
                            <button class="hamburger hamburger--collapse" type="button">
                                <span class="hamburger-box">
							<span class="hamburger-inner"></span>
                                </span>
                            </button>
                        </div>
                        <!-- Main Navigation -->
                        <nav id="navigation" class="style-1">
                            <ul id="responsive">
                                <li><a href="{% url 'popular_featured' %}" onclick="showLoading(event)">Home</a>
                                   
                                    </li>
                                    <li><a href="{% url 'property_list' %}" onclick="showLoading(event)">Property List</a>
                                       
                                    </li>
                                    <li><a href="{% url 'help_center' %}" onclick="showLoading(event)">Help Center</a>
                                    </li>
                                    {% comment %}
                                    <li><a href="{% url 'property_map' %}" onclick="showLoading(event)">Search Via Map</a>
                                   {% endcomment %}

                                {% if request.user.is_authenticated and request.user.referrals.exists %}
                                    <li><a href="{% url 'referral_dashboard' %}" onclick="showLoading(event)">Get rewards</a></li>
                                {% endif %}
                            
                                       
                                    </li>
                                    <li><a href="{% url 'Blog_post' %}" onclick="showLoading(event)">Pages</a>
                                       
                                    </li>
                                    <li><a href="{% url 'post_list' %}" onclick="showLoading(event)">Blog</a>
                                        
                                    </li>
                                   
                            </ul>
                        </nav>
                        <!-- Main Navigation / End -->
                    </div>
                    <!-- Left Side Content / End -->

                    <!-- Right Side Content / End -->
                    <div class="right-side d-none d-none d-lg-none d-xl-flex">
                        <!-- Header Widget -->
                        <div class="header-widget">
                            <a href="{% url 'add_property' %}" class="button border" onclick="showLoading(event)">Sajili Nyumba<i class="fas fa-laptop-house ml-2"></i></a>
                        </div>
                        <!-- Header Widget / End -->
                    </div>
                    <!-- Right Side Content / End -->

                    <!-- Right Side Content / End -->
                    <div class="header-user-menu user-menu add">
                        <div class="header-user-name">
                            <span>
                                <img src="{% if user.profile.profile_picture_1 %}{{user.profile.profile_picture_1}}{% else %} {% static 'images/default.jpg' %}{% endif %}" alt="{{user.username}}">
                              </span> Hi, {{user.username}}
                               
                        </div>
                        <ul>
                            <li><a href="{% url 'edit_profile' %}" onclick="showLoading(event)"> Edit profile</a></li>
                            <li><a href="{% url 'add_property' %}" onclick="showLoading(event)"> Sajili nyumba</a></li>
                            <li><a href="{% url 'jihudumie' %}" onclick="showLoading(event)">  Payments</a></li>
                            <li><a href="{% url 'reset_password' %}" onclick="showLoading(event)"> Change Password</a></li>
                            <li><a href="{% url 'logout' %}" onclick="showLoading(event)">Log Out</a></li>
                        </ul>
                    </div>
                    <!-- Right Side Content / End -->

                    <div class="right-side d-none d-none d-lg-none d-xl-flex sign ml-0">
                        
                    </div>
                    <!-- Right Side Content / End -->

                    <!-- lang-wrap-->
                    <div class="header-user-menu user-menu add d-none d-lg-none d-xl-flex">
                        <div class="lang-wrap">
                            <ul class="lang-tooltip lang-action no-list-style">
                               
                            </ul>
                        </div>
                    </div>
                    <!-- lang-wrap end-->

                </div>
            </div>
            <!-- Header / End -->

        </header>
        <div class="clearfix"></div>
        <!-- Header Container / End -->
        <!-- END SECTION HEADINGS -->

        <!-- START SECTION PROPERTIES LISTING -->

        
  
            
        {% if user.profile.is_verified == False %}
        <div class="marquee-container">
            <p class="marquee-text">
                🚀 Unataka kuona nyumba zote? Jiunge na kifurushi cha Gold au Platinum leo!</p>
            </div>
            <div class="col-xl-2 col-lg-2 col-md-4 pl-0">
                <button type="submit" class="btn btn-unique" onclick="window.location.href='{% url 'jihudumie' %}'" onclick="showLoading(event)">Jiunge Hapa</button>
            </div>
            
        {% endif %}

        {% if user.profile.is_verified %}
        {% if user.profile.subscription_plan == 'silver' %}
            <div class="marquee-container">
                <p class="marquee-text">
                     Unatumia Kifurushi cha Silver ambacho ni Bure na Hakina Nyumba zakutosha Jiunge na kifurushi cha Gold au Platinum leo! 🏡</p>
                </div>
                <div class="col-xl-2 col-lg-2 col-md-4 pl-0">
                    <button type="submit" class="btn btn-unique" onclick="window.location.href='{% url 'jihudumie' %}'" onclick="showLoading(event)">Jiunge Hapa</button>
                </div>
                

        {% elif user.profile.subscription_plan == 'gold' %}
        <div class="marquee-container">
            <p class="marquee-text">
                Una kifurushi Cha Gold kitakachodumu kwa Mwezi Mmoja Tafadhari Tembelea Mara kwa Mara Ili upate Nyumba mpya Kila zinaposajiliwa Au jiunge kifurushi cha Platinum ili ujulishwe kila nyumba inaposajiliwa kwasababu Nyumba Zilizochukuliwa Huondolewa kwenye Mfumo</p> 

                 </div>
                 <div class="col-xl-2 col-lg-2 col-md-4 pl-0">
                    <button type="submit" class="btn btn-unique" onclick="window.location.href='{% url 'jihudumie' %}'" onclick="showLoading(event)">Jiunge Hapa</button>
                </div>
                
                {% else %}


                <div class="marquee-container">
                    <p class="marquee-text">
                        Nyumba Zilizochukuliwa huondolewa Kwenye Mfumo Tafadhari Tembelea Mara kwa Mara Ili upate Nyumba mpya Kila zinaposajiliwa</p>  </div>
                    

            {% endif %}
            {% endif %}


       <section class="properties-list featured portfolio blog">
    <div class="container">
        
        <!-- Search Form -->
        <div class="col-12">
            <form method="GET" action="{% url 'search_property' %}">                                       
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="tabs_1">
                        <div class="rld-main-search">
                            <div class="row">
                                <div class="rld-single-input">
                                    <input id="searchInput" type="text" name="q" value="{{request.GET.q}}">
                                </div>

                                <!-- Typed.js CDN -->
                                <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
                                <script>
                                    var typed = new Typed("#searchInput", {
                                        strings: [
                                            "Andika jina la sehemu...",
                                            "Andika kiasi cha pango...",
                                            "Andika idadi ya vyumba..."
                                        ],
                                        typeSpeed: 80,     // kasi ya kuandika
                                        backSpeed: 50,     // kasi ya kufuta
                                        backDelay: 1500,   // muda wa kusubiri kabla ya kufuta
                                        startDelay: 500,   // muda kabla ya kuanza
                                        attr: "placeholder", // 👈 inaandika ndani ya placeholder
                                        bindInputFocusEvents: true,
                                        loop: true          // irudie milele
                                    });
                                </script>

                                <div class="col-xl-2 col-lg-2 col-md-4 pl-0">
                                    <div style="text-align: center;"><button type="submit" style="background-color: #FF5B6C; color: white; border: none; padding: 10px 25px; border-radius: 5px; cursor: pointer;" onclick="showLoading(event)">Tafuta Sasa</button></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>

   
        {% if results %}
            <h2 style="text-align: center;">Nyumba Maeneo ya {{ query }}</h2>
           
            {% endif %}

        <!-- <div class="row"> -->
      
<div class="row">
   
{% if results %} {% for property in results reversed %} <div class="item col-lg-4 col-md-6 col-xs-12 landscapes sale"> <div class="project-single" data-aos="fade-up"> <div class="project-inner project-head"> <div class="homes"> <!-- ================= LOCAL PROPERTY ================= --> {% if property.listing_type == "local" %} <a href="{% url 'property_detail' property.url_name %}" class="homes-img" onclick="showLoading(event)"> <div class="homes-tag button alt featured">Featured</div> <div class="homes-tag button alt sale">{{ property.status }}</div> <div class="homes-price">{{ property.price }} Tsh</div> <img src="{{ property.image_0|default:'https://via.placeholder.com/400x200?text=NyumbaChap' }}" alt="{{ property.title }}" class="img-responsive"> </a> <!-- ================= BEFORWARD PROPERTY ================= --> {% elif property.listing_type == "beforward" %} <a href="{% url 'Beforward_detail' property.id %}" class="homes-img" onclick="showLoading(event)"> <div class="homes-tag button alt featured">Active</div> <div class="homes-price">{{ property.price|default:"N/A" }}</div> <img src="{{ property.image_urls.0|default:'https://via.placeholder.com/400x200?text=Beforward' }}" alt="{{ property.title }}" class="img-responsive"> </a> <!-- ================= MAKAZI PROPERTY ================= --> {% elif property.listing_type == "makazi" %} <a href="{% url 'makazi_detail' property.id %}" class="homes-img" onclick="showLoading(event)"> <div class="homes-tag button alt featured">Active</div> <div class="homes-price">{{ property.price|default:"N/A" }}</div> <img src="{{ property.main_image_url|default:'https://via.placeholder.com/400x200?text=Makazi' }}" alt="{{ property.title }}" class="img-responsive"> </a> {% endif %} </div> <!-- ================= BUTTON EFFECT ================= --> <div class="button-effect"> {% if property.listing_type == "local" %} <a href="{% url 'property_detail' property.url_name %}" class="btn" onclick="showLoading(event)"><i class="fa fa-link"></i></a> {% if property.video_link %} <a href="{{ property.video_link }}" class="btn popup-video popup-youtube"><i class="fas fa-video"></i></a> {% endif %} {% comment %} Multiple Images for Local {% endcomment %} {% for img in property.images %} {% if img %} <a href="{{ img }}" class="img-poppu btn"><i class="fa fa-photo"></i></a> {% endif %} {% endfor %} {% elif property.listing_type == "beforward" %} <a href="{% url 'Beforward_detail' property.id %}" class="btn" onclick="showLoading(event)"><i class="fa fa-link"></i></a> {% elif property.listing_type == "makazi" %} <a href="{% url 'makazi_detail' property.id %}" class="btn" onclick="showLoading(event)"><i class="fa fa-link"></i></a> {% endif %} </div> </div> <!-- ================= HOMES CONTENT ================= --> <div class="homes-content"> <h3> {% if property.listing_type == "local" %} <a href="{% url 'property_detail' property.url_name %}" onclick="showLoading(event)">{{ property.title }}</a> {% elif property.listing_type == "beforward" %} <a href="{% url 'Beforward_detail' property.id %}" onclick="showLoading(event)">{{ property.title }}</a> {% elif property.listing_type == "makazi" %} <a href="{% url 'makazi_detail' property.id %}" onclick="showLoading(event)">{{ property.title }}</a> {% endif %} </h3> <p class="homes-address mb-3"> {% if property.listing_type == "local" %} <i class="fa fa-map-marker"></i> <span>{{ property.region }}, {{ property.ward }}</span> {% elif property.listing_type == "beforward" %} <i class="fa fa-map-marker"></i> <span>{{ property.city }}</span> {% elif property.listing_type == "makazi" %} <i class="fa fa-map-marker"></i> <span>{{ property.location }}</span> {% endif %} </p> <ul class="homes-list clearfix pb-3"> {% if property.listing_type == "local" %} <li class="the-icons"><i class="flaticon-bed mr-2"></i> <span>{{ property.bedrooms }} Bedrooms</span></li> <li class="the-icons"><i class="flaticon-bathtub mr-2"></i> <span>{{ property.bathrooms }} Bathrooms</span></li> <li class="the-icons"><i class="flaticon-square mr-2"></i> <span>{{ property.house_size }} sq m</span></li> <li class="the-icons"><i class="flaticon-car mr-2"></i> <span>0 Garages</span></li> {% endif %} </ul> <div style="margin-bottom: 10px;"> {% if property.listing_type == "local" %} <a href="{% url 'property_detail' property.url_name %}" class="btn btn-primary" onclick="showLoading(event)">Tazama</a> {% elif property.listing_type == "beforward" %} <a href="{% url 'Beforward_detail' property.id %}" class="btn btn-primary" onclick="showLoading(event)">Tazama</a> {% elif property.listing_type == "makazi" %} <a href="{% url 'makazi_detail' property.id %}" class="btn btn-primary" onclick="showLoading(event)">Tazama</a> {% endif %} </div> {% if property.listing_type == "local" %} <div class="footer"> <a href="{% url 'property_detail' property.url_name %}"> <img src="{{ property.property_owner_0 }}" alt="" class="mr-2"> {{ property.owner }} </a> <span>Posted {{ property.date_posted }}</span> </div> {% endif %} </div> </div> </div> {% endfor %}
{% else %}
 
{% for property in fallback_results %}
<div class="item col-lg-4 col-md-6 col-xs-12 landscapes sale">
    <div class="project-single blur-container" data-aos="fade-up" style="padding:8px; font-size:13px;">

        <!-- Overlay ya blur + lock -->
        <div class="blur-overlay" style="position:absolute; inset:0; background:rgba(70, 66, 66, 0.329); backdrop-filter:blur(6px); z-index:30; display:flex; justify-content:center; align-items:center; text-align:center; padding:12px;">
            <div class="locked-content" style="text-align:center;">
                <i class="fa fa-lock" style="font-size:36px; color:#a4161a; margin-bottom:10px;"></i>
                <p style="font-size:12px;background-color: rgba(255, 255, 255, 0.151);text-align: center; font-weight:600; line-height:1.4; color:#000000; margin-bottom:8px;">
                    Lipia Tsh.2500/= kwa mwezi 
                    Au Tsh.6999/= kwa mwaka ili kuona nyumba hii 
                    Na zingine Tanzania Nzima.
                </p>
                <a href="{% url 'final' %}" style="display:inline-block; padding:6px 12px; border:2px solid #a4161a; border-radius:6px; text-decoration:none; background:#fff; color:#a4161a; font-size:12px;">🔒 Lipa Hapa</a>
            </div>
        </div>

        <div class="project-inner project-head">
            <div class="homes">
                {% if property.listing_type == "local" %}
                <a href="{% url 'property_detail' property.url_name %}" class="homes-img" onclick="showLoading(event)">
                    <div style="height:140px; overflow:hidden; border-radius:6px; position:relative;">
                        <div class="homes-tag button alt featured" style="position:absolute; top:5px; left:5px; font-size:10px;">Featured</div>
                        <div class="homes-tag button alt sale" style="position:absolute; top:5px; right:5px; font-size:10px;">{{ property.status }}</div>
                        <div class="homes-price" style="position:absolute; bottom:5px; left:5px; font-size:12px; background:rgba(255,255,255,0.7); padding:2px 4px; border-radius:3px;">{{ property.price }} Tsh</div>
                        <img src="{{ property.image_0|default:'https://via.placeholder.com/400x200?text=NyumbaChap' }}" 
                             style="width:100%; height:100%; object-fit:cover; transition:transform 0.3s;">
                    </div>
                </a>
                {% elif property.listing_type == "beforward" %}
                <a href="{% url 'Beforward_detail' property.id %}" class="homes-img" onclick="showLoading(event)">
                    <div style="height:140px; overflow:hidden; border-radius:6px; position:relative;">
                        <div class="homes-tag button alt featured" style="position:absolute; top:5px; left:5px; font-size:10px;">Active</div>
                        <div class="homes-price" style="position:absolute; bottom:5px; left:5px; font-size:12px; background:rgba(255,255,255,0.7); padding:2px 4px; border-radius:3px;">{{ property.price|default:"N/A" }}</div>
                        <img src="{{ property.image_urls.0|default:'https://via.placeholder.com/400x200?text=Beforward' }}" 
                             style="width:100%; height:100%; object-fit:cover; transition:transform 0.3s;">
                    </div>
                </a>
                {% elif property.listing_type == "makazi" %}
                <a href="{% url 'makazi_detail' property.id %}" class="homes-img" onclick="showLoading(event)">
                    <div style="height:140px; overflow:hidden; border-radius:6px; position:relative;">
                        <div class="homes-tag button alt featured" style="position:absolute; top:5px; left:5px; font-size:10px;">Active</div>
                        <div class="homes-price" style="position:absolute; bottom:5px; left:5px; font-size:12px; background:rgba(255,255,255,0.7); padding:2px 4px; border-radius:3px;">{{ property.price|default:"N/A" }}</div>
                        <img src="{{ property.main_image_url|default:'https://via.placeholder.com/400x200?text=Makazi' }}" 
                             style="width:100%; height:100%; object-fit:cover; transition:transform 0.3s;">
                    </div>
                </a>
                {% endif %}
            </div>
        </div>

        <div class="homes-content" style="padding-top:4px;">
            <h3 style="font-size:14px; margin-bottom:2px;">{{ property.title }}</h3>
            <p class="homes-address mb-2" style="font-size:12px; margin-bottom:2px;">
                {% if property.listing_type == "local" %}
                    <i class="fa fa-map-marker"></i> <span>{{ property.region }}, {{ property.ward }}</span>
                {% elif property.listing_type == "beforward" %}
                    <i class="fa fa-map-marker"></i> <span>{{ property.city }}</span>
                {% elif property.listing_type == "makazi" %}
                    <i class="fa fa-map-marker"></i> <span>{{ property.location }}</span>
                {% endif %}
            </p>
        </div>
    </div>
</div>
{% endfor %}
{% endif %}

<script>
    // Hover zoom effect
    document.querySelectorAll('.homes-img div img').forEach(function(img){
        img.parentElement.addEventListener('mouseover', function(){
            img.style.transform = 'scale(1.05)';
        });
        img.parentElement.addEventListener('mouseout', function(){
            img.style.transform = 'scale(1)';
        });
    });
</script>


        </div>
         {% comment %}

        {% if request.user.is_authenticated %}
            {% if results %}
                <div><p style="text-align: center;">{{user.username}} Umekua Mtu wetu wa thamani sana Kwa kulitambua hilo tumeongeza vipengere hivi muhimu ili kuhakikisha haukosi Makazi.
                    Gusa Maandishi ya blue kwa <a href="{% url 'Beforward_list' %}">(Makazi ya kifahari)</a> au <a href="{% url 'makazi_list' %}">(Mchanganyiko)</a> ili uendelee kutafuta Makazi ya Chaguo lako
                </p></div>
            {% endif %}
        {% else %} 
            <br><br><br><br>
            <div><p style="text-align: center;"> Ili kuona nyumba nyingi zaidi Jisajiri na ufungue akaunt Bure kabisa.<br> Gusa <a href="{% url 'Register' %}">Hapa</a> Kujisajili<br><br><br><br><br>
            </p></div>
        {% endif %}
         {% endcomment %}
    </div>
</section>
<!-- END SECTION PROPERTIES LISTING -->

<!-- Loading overlay -->
<div id="loadingOverlay" style="
    display: none;
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.7);
    color: #fff;
    font-size: 1.5rem;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    flex-direction: column;
    text-align: center;
">
    <div class="spinner" style="
        border: 8px solid #f3f3f3;
        border-top: 8px solid #e63946;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        animation: spin 1s linear infinite;
        margin-bottom: 1rem;
    "></div>
    <p>wait for sec... 🔄</p>
</div>

<style>
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    .blurred-card {
        filter: blur(3px);
        pointer-events: none;
    }

    .blurred-image {
        filter: blur(3px);
    }

    .locked-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 10;
        background: rgba(0, 0, 0, 0.6);
        color: #fff;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        padding: 1rem;
        font-weight: bold;
    }

    .lock-icon {
        font-size: 2rem;
        margin-bottom: 0.5rem;
    }

    .nav-btn {
        background: #f1faee;
        color: #1d3557;
        padding: 0.6rem 1.4rem;
        border-radius: 30px;
        font-weight: 600;
        font-size: 1rem;
        text-decoration: none;
        box-shadow: 0 4px 10px rgba(29, 53, 87, 0.2);
        transition: background 0.3s ease, color 0.3s ease, transform 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .nav-btn:hover,
    .nav-btn:focus {
        background: #e63946;
        color: #f1faee;
        transform: scale(1.05);
        box-shadow: 0 6px 15px rgba(230, 57, 70, 0.8);
    }
</style>

<script>
    function showLoading(event) {
        document.getElementById('loadingOverlay').style.display = 'flex';
    }

    // ✅ Wakati page inafunguka fully, overlay iondoke
    window.addEventListener("load", function () {
        document.getElementById('loadingOverlay').style.display = 'none';
    });

    // ✅ Zuia overlay kujitokeza tena ukirudi nyuma (back button)
    window.addEventListener("pageshow", function (event) {
        if (event.persisted) { 
            document.getElementById('loadingOverlay').style.display = 'none';
        }
    });
</script>


        <!-- END SECTION PROPERTIES LISTING -->

        

        <!-- START PRELOADER -->
        <div id="preloader">
            <div id="status">
                <div class="status-mes"></div>
            </div>
        </div>
        <!-- END PRELOADER -->

        <!-- ARCHIVES JS -->
        <script src="{% static 'js/jquery-3.5.1.min.js'%}"></script>
        <script src="{% static 'js/rangeSlider.js'%}"></script>
        <script src="{% static 'js/tether.min.js'%}"></script>
        <script src="{% static 'js/moment.js'%}"></script>
        <script src="{% static 'js/bootstrap.min.js'%}"></script>
        <script src="{% static 'js/mmenu.min.js'%}"></script>
        <script src="{% static 'js/mmenu.js'%}"></script>
        <script src="{% static 'js/aos.js'%}"></script>
        <script src="{% static 'js/aos2.js'%}"></script>
        <script src="{% static 'js/animate.js'%}"></script>
        <script src="{% static 'js/slick.min.js'%}"></script>
        <script src="{% static 'js/fitvids.js'%}"></script>
        <script src="{% static 'js/jquery.waypoints.min.js'%}"></script>
        <script src="{% static 'js/typed.min.js'%}"></script>
        <script src="{% static 'js/jquery.counterup.min.js'%}"></script>
        <script src="{% static 'js/imagesloaded.pkgd.min.js'%}"></script>
        <script src="{% static 'js/isotope.pkgd.min.js'%}"></script>
        <script src="{% static 'js/smooth-scroll.min.js'%}"></script>
        <script src="{% static 'js/lightcase.js'%}"></script>
        <script src="{% static 'js/search.js'%}"></script>
        <script src="{% static 'js/owl.carousel.js'%}"></script>
        <script src="{% static 'js/jquery.magnific-popup.min.js'%}"></script>
        <script src="{% static 'js/ajaxchimp.min.js'%}"></script>
        <script src="{% static 'js/newsletter.js'%}"></script>
        <script src="{% static 'js/jquery.form.js'%}"></script>
        <script src="{% static 'js/jquery.validate.min.js'%}"></script>
        <script src="{% static 'js/searched.js'%}"></script>
        <script src="{% static 'js/forms-2.js'%}"></script>
        <script src="{% static 'js/map-style2.js'%}"></script>
        <script src="{% static 'js/range.js'%}"></script>
        <script src="{% static 'js/color-switcher.js'%}"></script>
        <script>
            $(window).on('scroll load', function() {
                $("#header.cloned #logo img").attr("src", $('#header #logo img').attr('data-sticky-logo'));
            });

        </script>

        <!-- Slider Revolution scripts -->
        <script src="{% static 'revolution/js/jquery.themepunch.tools.min.js'%}"></script>
        <script src="{% static 'revolution/js/jquery.themepunch.revolution.min.js'%}"></script>

        <script>
            var typed = new Typed('.typed', {
                strings: ["House ^2000", "Apartment ^2000", "Plaza ^4000"],
                smartBackspace: false,
                loop: true,
                showCursor: true,
                cursorChar: "|",
                typeSpeed: 50,
                backSpeed: 30,
                startDelay: 800
            });

        </script>

        <script>
            $('.slick-lancers').slick({
                infinite: false,
                slidesToShow: 4,
                slidesToScroll: 1,
                dots: true,
                arrows: false,
                adaptiveHeight: true,
                responsive: [{
                    breakpoint: 1292,
                    settings: {
                        slidesToShow: 2,
                        slidesToScroll: 2,
                        dots: true,
                        arrows: false
                    }
                }, {
                    breakpoint: 993,
                    settings: {
                        slidesToShow: 2,
                        slidesToScroll: 2,
                        dots: true,
                        arrows: false
                    }
                }, {
                    breakpoint: 769,
                    settings: {
                        slidesToShow: 1,
                        slidesToScroll: 1,
                        dots: true,
                        arrows: false
                    }
                }]
            });

        </script>

        <script>
            $('.job_clientSlide').owlCarousel({
                items: 2,
                loop: true,
                margin: 30,
                autoplay: false,
                nav: true,
                smartSpeed: 1000,
                slideSpeed: 1000,
                navText: ["<i class='fa fa-chevron-left'></i>", "<i class='fa fa-chevron-right'></i>"],
                dots: false,
                responsive: {
                    0: {
                        items: 1
                    },
                    991: {
                        items: 3
                    }
                }
            });

        </script>

        <script>
            $('.style2').owlCarousel({
                loop: true,
                margin: 0,
                dots: false,
                autoWidth: false,
                autoplay: true,
                autoplayTimeout: 5000,
                responsive: {
                    0: {
                        items: 2,
                        margin: 20
                    },
                    400: {
                        items: 2,
                        margin: 20
                    },
                    500: {
                        items: 3,
                        margin: 20
                    },
                    768: {
                        items: 4,
                        margin: 20
                    },
                    992: {
                        items: 5,
                        margin: 20
                    },
                    1000: {
                        items: 7,
                        margin: 20
                    }
                }
            });

        </script>

        <script>
            $(".dropdown-filter").on('click', function() {

                $(".explore__form-checkbox-list").toggleClass("filter-block");

            });

        </script>

        <!-- MAIN JS -->
        <script src="{% static 'js/script.js'%}"></script>

    </div>
    <!-- Wrapper / End -->

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var protectedText = 'This text is protected.';
            var encodedText = btoa(protectedText); // Encode text to base64
            document.getElementById('protectedContent').innerText = atob(encodedText); // Decode back to original text
        });
    </script>



<script>
    // Zuia matumizi ya Print Screen (PrtSc)
document.addEventListener('keydown', function(event) {
    if (event.key === 'PrintScreen') {
        event.preventDefault();
        alert('Screenshots not allowed for more info call 0629712678.');
    }
});

document.addEventListener('keyup', function(event) {
    if (event.key === 'PrintScreen') {
        navigator.clipboard.writeText('Screenshots is Disable.').then(function() {
            alert('Screenshots not allowed for more info call 0629712678');
        });
    }
});

// Zuia Developer Tools (F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U)
document.addEventListener('keydown', function(event) {
    if (event.key === 'F12' || 
        (event.ctrlKey && event.shiftKey && (event.key === 'I' || event.key === 'J')) || 
        (event.ctrlKey && event.key === 'U')) {
        event.preventDefault();
        alert('Developer tools not allowed for more info call 0629712678.');
    }
});

</script>



<!-- Loading overlay -->
<div id="loadingOverlay" style="
    display: none;
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.7);
    color: #fff;
    font-size: 1.5rem;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    flex-direction: column;
    text-align: center;
">
  <div class="spinner" style="
      border: 8px solid #f3f3f3;
      border-top: 8px solid #e63946;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      animation: spin 1s linear infinite;
      margin-bottom: 1rem;
  "></div>
  <p>wait for sec... 🔄</p>
</div>

<style>
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
</style>

<script>
function showLoading(event) {
  document.getElementById('loadingOverlay').style.display = 'flex';
}

// ✅ Wakati page inafunguka fully, overlay iondoke
window.addEventListener("load", function () {
  document.getElementById('loadingOverlay').style.display = 'none';
});

// ✅ Zuia overlay kujitokeza tena ukirudi nyuma (back button)
window.addEventListener("pageshow", function (event) {
  if (event.persisted) { 
    document.getElementById('loadingOverlay').style.display = 'none';
  }
});
</script>








    
<!-- Feedback Modal -->
<div id="feedback-modal">
    <div class="modal-content">
      <button class="close-btn" onclick="closeFeedbackModal()">×</button>
      <h3>📝 We'd love your feedback</h3>
      <form id="feedback-form">
        {% csrf_token %}
        <input type="text" id="name" name="name" placeholder="Your Name (optional)">
        <textarea id="comment" name="comment" required placeholder="Write your feedback..."></textarea>
        <select id="rating" name="rating" required>
          <option value="">Rate our service</option>
          <option value="1">★☆☆☆☆ - Poor</option>
          <option value="2">★★☆☆☆ - Fair</option>
          <option value="3">★★★☆☆ - Good</option>
          <option value="4">★★★★☆ - Very good</option>
          <option value="5">★★★★★ - Excellent</option>
        </select>
        <button type="submit">Send Feedback</button>
      </form>
      <p id="feedback-message"></p>
    </div>
  </div>
  
  <!-- Floating Button -->
  <button class="floating-btn" onclick="showFeedbackModal()">💬</button>
  <script>
    const feedbackModal = document.getElementById("feedback-modal");
    const feedbackForm = document.getElementById("feedback-form");
    const feedbackMessage = document.getElementById("feedback-message");
  
    setTimeout(() => {
      if (!localStorage.getItem("feedbackGiven")) {
        showFeedbackModal();
      }
    }, 40000);
  
    function showFeedbackModal() {
      feedbackModal.style.display = "flex";
    }
  
    function closeFeedbackModal() {
      feedbackModal.style.display = "none";
    }
  
    feedbackForm.addEventListener("submit", function (e) {
      e.preventDefault();
      const formData = new FormData(feedbackForm);
  
      fetch("{% url 'submit_feedback' %}", {
        method: "POST",
        headers: {
          "X-CSRFToken": getCSRFToken()
        },
        body: formData
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          feedbackMessage.textContent = "✅ Thank you for your feedback!";
          feedbackMessage.style.display = "block";
          localStorage.setItem("feedbackGiven", "true");
          setTimeout(() => {
            closeFeedbackModal();
          }, 3000);
        }
      });
    });
  
    function getCSRFToken() {
      return document.querySelector("[name=csrfmiddlewaretoken]")?.value ||
             document.querySelector("meta[name='csrf-token']")?.getAttribute("content");
    }
  </script>
</body>


</html> 